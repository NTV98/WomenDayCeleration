<!-- Message Popup Component -->
<div 
  *ngIf="isVisible" 
  class="popup-overlay"
  (click)="onClose()"
>
  <div 
    class="popup-content"
    [@popupAnimation]="isVisible ? 'visible' : 'hidden'"
    (click)="$event.stopPropagation()"
  >
    <!-- Close button -->
    <button 
      (click)="onClose()"
      class="popup-close"
    >
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <!-- Message content -->
    <div class="popup-body">

      
      <!-- Step Content Container -->
      <div class="step-container">
        
        <!-- Step 1: Welcome -->
        <div *ngIf="currentStep === 0" class="step-content welcome-step">

          <div class="step-header">
            <div class="popup-icon">
              <span>ğŸ’–</span>
            </div>
            <h2 class="popup-name">Gá»­i Ä‘áº¿n Nháº­t Linh</h2>
          </div>
          <div class="step-body">
            <div class="step-icon">ğŸ‰</div>
            <h3 class="step-title">ChÃ o má»«ng em Ä‘áº¿n vá»›i ngÃ y Ä‘áº·c biá»‡t!</h3>
            <p class="step-description">
              HÃ´m nay lÃ  ngÃ y 20/10 - NgÃ y Phá»¥ Ná»¯ Viá»‡t Nam. 
              Anh Ä‘Ã£ chuáº©n bá»‹ má»™t mÃ³n quÃ  Ä‘áº·c biá»‡t cho em! ğŸ’–
            </p>
          </div>
  

        </div>
        
        <!-- Step 2: Slideshow -->
        <div *ngIf="currentStep === 1" class="step-content slideshow-step">
          <h3 class="step-title">Nhá»¯ng khoáº£nh kháº¯c Ä‘áº¹p cá»§a chÃºng ta</h3>
          <div class="slideshow-container">
            <div class="slideshow-wrapper">
              <div 
                *ngFor="let image of images; let i = index"
                class="slide"
                [class.active]="i === currentSlideIndex"
              >
                <img 
                  [src]="image" 
                  [alt]="'HÃ¬nh áº£nh chÃºc má»«ng cho Nháº­t Linh ' + (i + 1)"
                  class="popup-image"
                />
                <div class="image-overlay">
                  <span class="image-heart">ğŸ’•</span>
                </div>
              </div>
            </div>
            
            <!-- Navigation Dots -->
            <div class="slideshow-dots">
              <span 
                *ngFor="let image of images; let i = index"
                class="dot"
                [class.active]="i === currentSlideIndex"
                (click)="goToSlide(i)"
              ></span>
            </div>
            
            <!-- Navigation Arrows -->
            <button class="prev-btn" (click)="previousSlide()">â®</button>
            <button class="next-btn" (click)="nextSlide()">â¯</button>
          </div>
        </div>
        
        <!-- Step 3: Message -->
        <div *ngIf="currentStep === 2" class="step-content message-step">
          <div class="step-icon">ğŸ’Œ</div>
          <h3 class="step-title">Lá»i chÃºc tá»« trÃ¡i tim anh</h3>
          <p class="step-description">
            NhÃ¢n dá»‹p 20/10, chÃºc ngÆ°á»i yÃªu xinh Ä‘áº¹p nháº¥t tráº§n Ä‘á»i cá»§a anh cÃ³ má»™t ngÃ y lá»… vui váº», ngáº­p trÃ n háº¡nh phÃºc. Anh yÃªu em ráº¥t nhiá»u! Cáº£m Æ¡n em Ä‘Ã£ Ä‘áº¿n vÃ  sÆ°á»Ÿi áº¥m trÃ¡i tim anh. NhÃ¢n ngÃ y 20/10, chÃºc ngÆ°á»i anh yÃªu mÃ£i xinh Ä‘áº¹p, tráº» trung vÃ  yÃªu anh nhiá»u hÆ¡n ná»¯a nhÃ©! ğŸ’–
          </p>
        </div>
        
        <!-- Step 4: Memories -->
        <div *ngIf="currentStep === 3" class="step-content memories-step">
          <div class="step-icon">ğŸ“¸</div>
          <h3 class="step-title">Nhá»¯ng ká»‰ niá»‡m Ä‘Ã¡ng nhá»›</h3>
          <div class="memories-grid">
            <div *ngFor="let memory of memories" class="memory-item">
              <div class="memory-icon">{{ memory.icon }}</div>
              <h4 class="memory-title">{{ memory.title }}</h4>
              <p class="memory-description">{{ memory.description }}</p>
            </div>
          </div>
        </div>
        
        <!-- Step 5: Final -->
        <div *ngIf="currentStep === 4" class="step-content final-step">
          <div class="step-icon">ğŸ’</div>
          <h3 class="step-title">Cáº£m Æ¡n em vÃ¬ táº¥t cáº£!</h3>
          <p class="step-description">
            Em lÃ  ngÆ°á»i phá»¥ ná»¯ tuyá»‡t vá»i nháº¥t trong cuá»™c Ä‘á»i anh. YÃªu em nhiá»u nÃ¨ğŸ’–
          </p>
          <div class="final-hearts">
            <span>ğŸ’•</span>
            <span>ğŸ’–</span>
            <span>ğŸ’•</span>
            <span>ğŸ’–</span>
            <span>ğŸ’•</span>
          </div>
        </div>
        
      </div>
      
      <!-- Navigation and Decorations Combined -->
      <div class="nav-decorations-container">
        <!-- Navigation Buttons -->
        <div class="step-navigation">
          <button 
            *ngIf="currentStep > 0"
            (click)="previousStep()"
            class="nav-button prev-step-btn"
          >
            â® TrÆ°á»›c
          </button>
          
          <button 
            *ngIf="currentStep < steps.length - 1"
            (click)="nextStep()"
            class="nav-button next-step-btn"
          >
            Tiáº¿p â¯
          </button>
          
          <button 
            *ngIf="currentStep === steps.length - 1"
            (click)="goToHeartPage()"
            class="nav-button finish-btn"
          >
            Cuá»‘i gÃ²i nÃ¨! ğŸ’
          </button>
        </div>
        
        <!-- Decorative elements -->
        <div class="popup-decorations">
          <span>ğŸŒ¸</span>
          <span>âœ¨</span>
          <span>ğŸ’•</span>
          <span>ğŸŒº</span>
          <span>ğŸ’</span>
        </div>
      </div>
    </div>
  </div>
</div>